digraph AI_Paralegal_Architecture {
    // Graph settings
    rankdir=TB;
    node [shape=box, style="rounded,filled", fontname="Arial"];
    edge [fontname="Arial"];
    
    // Color scheme
    node [fillcolor="#e8f4fd"];
    
    // Subgraphs for layers
    subgraph cluster_api {
        label="API Layer";
        style=filled;
        fillcolor="#f0f8ff";
        
        "FastAPI Main" [fillcolor="#4a90e2"];
        "Auth Routes" [fillcolor="#87ceeb"];
        "Case Routes" [fillcolor="#87ceeb"];
        "Monitoring Routes" [fillcolor="#87ceeb"];
    }
    
    subgraph cluster_agents {
        label="Agent Layer";
        style=filled;
        fillcolor="#f5f5dc";
        
        "Paralegal Agent SDK" [fillcolor="#daa520"];
    }
    
    subgraph cluster_services {
        label="Service Layer";
        style=filled;
        fillcolor="#e6ffe6";
        
        "Case Management" [fillcolor="#90ee90"];
        "Document Generation" [fillcolor="#90ee90"];
        "Statute Search" [fillcolor="#90ee90"];
        "Supreme Court" [fillcolor="#90ee90"];
        "OpenAI Client" [fillcolor="#90ee90"];
    }
    
    subgraph cluster_core {
        label="Core Infrastructure";
        style=filled;
        fillcolor="#ffe6e6";
        
        "Config Service" [fillcolor="#ffb6c1"];
        "Database Manager" [fillcolor="#ffb6c1"];
        "LLM Manager" [fillcolor="#ffb6c1"];
        "Tool Registry" [fillcolor="#ffb6c1"];
        "Logger Manager" [fillcolor="#ffb6c1"];
    }
    
    subgraph cluster_worker {
        label="Celery Worker Layer";
        style=filled;
        fillcolor="#fff0e6";
        
        "Celery App" [fillcolor="#ffa500"];
        "Service Registry" [fillcolor="#ffa500"];
        "Task Monitoring" [fillcolor="#ffa500"];
        "Worker Tasks" [fillcolor="#ffcc99"];
    }
    
    subgraph cluster_data {
        label="Data Layer";
        style=filled;
        fillcolor="#e6e6fa";
        
        "PostgreSQL" [shape=cylinder, fillcolor="#9370db"];
        "Redis" [shape=cylinder, fillcolor="#9370db"];
        "Qdrant" [shape=cylinder, fillcolor="#9370db"];
    }
    
    // Connections
    "FastAPI Main" -> "Auth Routes";
    "FastAPI Main" -> "Case Routes";
    "FastAPI Main" -> "Monitoring Routes";
    "FastAPI Main" -> "Paralegal Agent SDK";
    
    "Auth Routes" -> "Database Manager";
    "Case Routes" -> "Case Management";
    "Monitoring Routes" -> "Celery App";
    
    "Paralegal Agent SDK" -> "Tool Registry";
    "Paralegal Agent SDK" -> "Case Management";
    "Paralegal Agent SDK" -> "Document Generation";
    
    "Case Management" -> "Database Manager";
    "Document Generation" -> "Statute Search";
    "Document Generation" -> "Supreme Court";
    "Document Generation" -> "OpenAI Client";
    
    "Statute Search" -> "LLM Manager";
    "Statute Search" -> "Qdrant";
    "Supreme Court" -> "Database Manager";
    "Supreme Court" -> "Qdrant";
    
    "Database Manager" -> "PostgreSQL";
    "Config Service" -> "Redis";
    "LLM Manager" -> "OpenAI Client";
    
    "Celery App" -> "Service Registry";
    "Celery App" -> "Redis";
    "Service Registry" -> "Config Service";
    "Service Registry" -> "Database Manager";
    "Service Registry" -> "LLM Manager";
    
    "Worker Tasks" -> "Service Registry";
    "Worker Tasks" -> "Task Monitoring";
    "Task Monitoring" -> "Redis";
}
